let messages = [];

async function send() {
  const text = document.getElementById("msg").value;
  append("You: " + text);
  messages.push({role:"user", content:text});

  const res = await fetch("https://cwz-bot.YOUR_ACCOUNT.workers.dev", {
    method:"POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({ messages })
  });

  const data = await res.json();
  const reply = data.reply;
  append("CWZ: " + reply);
  messages.push({role:"assistant", content: reply});
}

function append(text) {
  const log = document.getElementById("log");
  const div = document.createElement("div");
  div.innerText = text;
  log.appendChild(div);
  log.scrollTop = log.scrollHeight;
}